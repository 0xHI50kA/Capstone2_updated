<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Symptoms Checker</title>
  <style>

    /* Main container */
      .main-container {
      margin: auto;
      width: 800px;
      background-color: #f5f5f5; /* light black / soft gray */
      height: 500px;
      box-shadow: 0px 4px 12px rgba(33, 33, 33, 0.3); /* deeper soft black shadow */
      border: 2px solid lightslategray; /* darker gray border */
      padding: 25px;
      border-radius: 10px;
    }

    /* Chatbox */
    #chatbox {
      font-size: 20px;
      flex-grow: 1;
      height: 65%;
      border: 1px solid lightslategray;
      overflow-y: auto;
      padding: 15px;
      background-color: #f8f9fa;
      margin-bottom: 15px;
      border-radius: 5px;
    }


    /* Typing indicator */
    #botTyping {
      color: gray;
      font-style: italic;
      margin-bottom: 5px;
      height: 20px;
      text-align: center;
    }

    /* Button Container */
    #buttonContainer {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px; /* Space between buttons */
      margin-top: 20px;
    }

    /* Buttons */
    .response-button {
      font-size: 15px;
      border: none;
      border-radius: 5px;
      padding: 10px 20px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .yes-button {
      background-color: #4caf50;
      color: white;
    }

    .no-button {
      background-color: #f44336;
      color: white;
    }

    .response-button:hover {
      opacity: 0.9;
    }
            #loadingModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }

    .loading-content {
        background: white;
        padding: 30px 40px;
        border-radius: 10px;
        font-size: 20px;
        font-weight: bold;
        color: #333;
        box-shadow: 0 0 15px rgba(0,0,0,0.3);
        opacity: 0;
        animation: fadeInOut 5s forwards;
    }

    @keyframes fadeInOut {
        0% { opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; }
    }
    @media screen and (max-width: 768px) {
    #chatbox {
        font-size: 18px; /* Slightly reduce font size for better fitting */
        padding: 10px;
        border-radius: 15px; /* More rounded for a sleek mobile look */
    }
    .main-container{
      width: auto;
    }
}
  </style>
     <link rel="stylesheet" href="AiHeader.css">
     <link rel="stylesheet" type="text/css" href="index3.css">
   <!--============ FONT AWESOME CSS LINK START ============-->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="css/styles.css">

   <!--============ FONT AWESOME CSS LINK END ============-->
</head>

<body>
       <!-- Loading Modal -->
        <div id="loadingModal">
            <div class="loading-content">
                <p>üîç Analyzing...</p>
            </div>
        </div>
  <button class="back"  onclick="window.location.href='me2.html'">‚Üê Back</button>
  <!-- <header>
    <div class="logo">
        <a href="index.html"><i class="fa-solid fa-notes-medical"></i>SymptoAid</a>
    </div>
    <h2>AI Symptom Checker</h2>
</header> -->
<header class="headin">


</header>
  <!-- Main UI Structure -->
  <div class="main-container">
    <!-- Header -->
     <div style="text-align: center;"><i class="fa-solid fa-robot fa-2x"></i></div>
    
    <!-- Typing indicator -->
    <div id="botTyping"></div>

    <!-- Chatbox Area -->
    <div id="chatbox"></div>

    <!-- Response Buttons -->
    <div id="buttonContainer"></div>
  </div>

  <br><br><br>
<!--================= FOOTER START ==================-->
<footer>
  <div class="footer-container">
      <div class="footer-logo">
          <p style="font-weight: bold;font-size: 25px; color: #0061ff; "> <i class="fa-solid fa-notes-medical"></i> SymptoAid</p>
          <p style="font-size: 20px;">SymptoAid is your reliable health companion, providing accurate symptom checks and essential medical guidance.</p>
      </div>

      <div class="footer-links">
          <p class="footheader" style="font-weight: bold;font-size: 25px;">Important Links</p>
          <ul>
                <!-- <li ><a href="../../index.html">Home</a></li> -->
                <li ><a href="/ATABSHEALTHCARE10/Admin2/news-report.php">News</a></li>
                <li ><a href="/ATABSHEALTHCARE10/AAtabHealthCare/Eventss/Event1.html">Events</a></li>
                <!-- <li ><a href="../AAtabHealthCare/Servicess/services.html">Services</a></li> -->
				<li ><a href="/ATABSHEALTHCARE10/AAtabHealthCare/SymptomAI/AboutAI.html">Symptom Checker</a></li>
				<li ><a href="/ATABSHEALTHCARE10/nearby.html">Nearby Healthcare</a></li>
            </ul>
      </div>

      <div class="footer-contact">
          <p class="footheader" style="font-weight: bold;font-size: 25px;">Contact Us</p>
    
    <p  style="font-size: 20px;"><i class="fas fa-envelope"></i> atabhc2019@gmail.com</p>
          <p style="font-size: 20px;"><i class="fas fa-phone" ></i> +4209087 </p>
    
          <p  style="font-size: 20px;"><i class="fas fa-map-marker-alt"></i> Circumferential Road,Baguio City</p>
      </div>

      <div class="footer-social">
        <p class="footheader" style="font-weight: bold;font-size: 25px;">Follow Us</p>
        <a href="https://web.facebook.com/atab.healthcenter" style="font-size: 35px; color: #3b5998;"><i class="fab fa-facebook"></i></a>
  <a href="https://web.facebook.com/messages/t/100068026195085" style="font-size: 35px;color: #0084ff;"><i class="fab fa-facebook-messenger"></i></a>
        <!-- <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a> -->
  <br>
  <p class="footheader" style="font-weight: bold;font-size: 25px;">Reference</p>
  <a href="https://doh.gov.ph" >Department of Health</a>
  <br>
  <a href="https://www.who.int/" >World Health Organization</a>
  
  
  
  
  <!-- Email Icon -->
  <!-- <a href="" style="font-size: 35px;">
    <i class="fas fa-envelope"></i>
  </a> -->
    </div>

</div>
<button id="backToTop"   class="back-to-top">‚Üë </button>
<!-- <div class="footer-bottom">
    <p>&copy; 2024 Health Center. All rights reserved.</p>
</div> -->
</footer>
<!--================= FOOTER END ==================-->
  
  <script>
let questionIndex = 0;
let severityCount = {
  mild: 0,
  persistent: 0,
  urgent: 0
};

const questions = [
  // Mild symptoms first
  { text: "Have you experienced chills along with your fever?", level: "mild" },
  { text: "Do you have body aches or muscle pain?", level: "mild" },
  { text: "Are you experiencing fatigue or weakness?", level: "mild" },
  { text: "Do you have a headache along with your fever?", level: "mild" },
  { text: "Do you have a sore throat?", level: "mild" },

  // Persistent symptoms next
  { text: "Do you have a fever higher than 100¬∞F (37.8¬∞C)?", level: "persistent" },
  { text: "Have you experienced sweating at night?", level: "persistent" },
  { text: "Are you experiencing a cough along with your fever?", level: "persistent" },
  { text: "Do you have a recent history of exposure to someone with COVID-19 or other infectious diseases?", level: "persistent" },
  { text: "Do you experience nausea or vomiting with your fever?", level: "persistent" },

  // Urgent symptoms last
  { text: "Have you had difficulty breathing recently?", level: "urgent" },
  { text: "Have you noticed unexplained rashes along with your fever?", level: "urgent" }
];

    let lastAnswer = null; // Track the last response

    // Display bot's message
    function displayMessage(message, isBot = true) {
      const chatbox = document.getElementById("chatbox");
      const msgDiv = document.createElement("div");
      msgDiv.textContent = message;
      msgDiv.style.marginBottom = "10px";

      if (isBot) {
    msgDiv.style.color = "#000"; // Black text for bot messages
    msgDiv.style.backgroundColor = "#f0f0f0"; // Light gray background for bot messages
    msgDiv.style.borderRadius = "15px"; // Rounded corners for bot messages
    msgDiv.style.padding = "10px"; // Add padding for better appearance
} else {
    msgDiv.style.color = "#fff"; // White text for user messages
    msgDiv.style.backgroundColor = "#2b7de2"; // Blue background for user messages
    msgDiv.style.borderRadius = "15px"; // Rounded corners for user messages
    msgDiv.style.padding = "10px"; // Add padding for consistency
}
      chatbox.appendChild(msgDiv);

      // Scroll to the bottom
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    // Simulate bot typing
    function showBotTyping() {
      const typingDiv = document.getElementById("botTyping");
      typingDiv.textContent = "Bot is typing...";
      setTimeout(() => {
        typingDiv.textContent = "";
      }, 1000);
    }

    // Render Yes/No buttons
    function renderResponseButtons() {
      const buttonContainer = document.getElementById("buttonContainer");
      buttonContainer.innerHTML = "";

      const yesButton = document.createElement("button");
      yesButton.textContent = "Yes";
      yesButton.classList.add("response-button", "yes-button");
      yesButton.onclick = () => handleResponse("Yes");

      const noButton = document.createElement("button");
      noButton.textContent = "No";
      noButton.classList.add("response-button", "no-button");
      noButton.onclick = () => handleResponse("No");

      buttonContainer.appendChild(yesButton);
      buttonContainer.appendChild(noButton);
    }

    
   // Handle user response
 function handleResponse(response) {
  displayMessage(`You: ${response}`, false);

  const currentQuestion = questions[questionIndex];

  if (response === "Yes") {
    severityCount[currentQuestion.level]++;
  }

  showBotTyping();

  setTimeout(() => {
    if (questionIndex < questions.length - 1) {
      questionIndex++;
      displayMessage(questions[questionIndex].text);
      renderResponseButtons();
    } else {
      document.getElementById("buttonContainer").innerHTML = "";

      const modal = document.getElementById("loadingModal");
      modal.style.display = "flex";

      setTimeout(() => {
        modal.style.display = "none";

        // Calculate total "Yes" responses
        const totalYes = severityCount.mild + severityCount.persistent + severityCount.urgent;

        console.log("Final Severity Count:", severityCount);
        let resultPage = "";

        if (severityCount.urgent > 0 || totalYes >= 9) {
          resultPage = "resultf3.html"; // üî¥ Urgent
        } else if (severityCount.persistent > 0) {
          resultPage = "resultf2.html"; // üü† Persistent
        } else if (severityCount.mild > 0) {
          resultPage = "resultf1.html"; // üü¢ Mild
        } else {
          resultPage = "resultf0.html"; // ‚úÖ No concerning symptoms
        }

        window.location.href = resultPage;
      }, 5000);
    }
  }, 1000);
}


    // Simulate initial bot messages and render buttons
    window.onload = () => {
      showBotTyping();
      setTimeout(() => {
        displayMessage(
          "Hello, I am your AI Symptom Checker focused on fever-related symptoms. I'll ask you a few questions to analyze your responses."
        );

        setTimeout(() => {
          displayMessage(
            "If you're ready, let's start with the first question:"
          );

          setTimeout(() => {
            displayMessage(questions[questionIndex].text);
            renderResponseButtons();
          }, 1000);
        }, 1500);
      }, 1000);
    };
  </script>
  <script type="text/javascript" src="AiHeader.js"></script>
  <script type="text/javascript" src="AiIndex.js"></script>
     <script>
        document.addEventListener("DOMContentLoaded", function () {
            var backToTopButton = document.getElementById("backToTop");
        
            // Show/hide the button on scroll
            window.onscroll = function () {
                if (document.documentElement.scrollTop > 300) {
                    backToTopButton.classList.add("show");
                } else {
                    backToTopButton.classList.remove("show");
                }
            };
        
            // Scroll smoothly to the top when clicked
            backToTopButton.addEventListener("click", function () {
                window.scrollTo({ top: 0, behavior: "smooth" });
            });
        });
        </script>
</body>

</html>
